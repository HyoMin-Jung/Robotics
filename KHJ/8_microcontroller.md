# 마이크로컨트롤러(Microcontroller) 기반 로봇 제어 방식

로봇 제어는 마이크로컨트롤러(Microcontroller)를 핵심으로 합니다. 마이크로컨트롤러는 로봇의 두뇌 역할을 하며, 센서로부터 데이터를 받아들이고 모터와 같은 액추에이터(Actuator)를 제어하여 로봇이 원하는 동작을 수행하도록 합니다.

## 1. 마이크로컨트롤러(Microcontroller)의 역할

마이크로컨트롤러는 단일 칩에 프로세서(Processor), 메모리(Memory), 입출력(I/O) 주변 장치 등을 통합한 소형 컴퓨터입니다. 로봇 시스템에서 마이크로컨트롤러의 주요 역할은 다음과 같습니다.

* **센서 데이터 처리:** 로봇의 주변 환경을 감지하는 센서(예: 거리 센서, 온도 센서, IMU 등)로부터 데이터를 수집하고 처리합니다.
* **제어 로직(Logic) 실행:** 센서 데이터를 기반으로 로봇의 동작을 결정하는 제어 알고리즘(Algorithm)을 실행합니다.
* **액추에이터(Actuator) 제어:** 모터(Motor), 서보(Servo), LED 등 로봇의 물리적인 움직임을 담당하는 액추에이터를 제어합니다.
* **통신:** 다른 장치나 컴퓨터와 데이터를 주고받습니다.

## 2. 기본 제어 방식과 인터페이스(Interface)

마이크로컨트롤러는 다양한 인터페이스를 통해 외부 장치와 상호작용합니다.

### 2.1. PWM (Pulse Width Modulation)

**PWM (펄스 폭 변조)**은 디지털(Digital) 신호를 사용하여 아날로그(Analog) 효과를 내는 기술입니다. 주로 모터 속도 제어, LED 밝기 조절 등에 사용됩니다. 디지털 핀에서 특정 주기의 펄스(Pulse)를 생성하고, 이 펄스의 폭(즉, High 상태의 비율)을 조절하여 평균 전압을 변화시킵니다.

### 2.2. 아날로그(Analog) 핀과 디지털(Digital) 핀

* **아날로그 핀 (Analog Pin):** 연속적인 값(예: 0V ~ 5V)을 측정하거나 출력하는 데 사용됩니다. 주로 센서 값 읽기(ADC: Analog-to-Digital Converter), 아날로그 신호 출력(DAC: Digital-to-Analog Converter, 모든 마이크로컨트롤러가 내장하지는 않음) 등에 사용됩니다.
* **디지털 핀 (Digital Pin):** 두 가지 상태(High/Low, ON/OFF, 0V/5V 등)만 표현하는 데 사용됩니다. 버튼 입력, LED 제어, 디지털 센서 읽기 등에 사용됩니다.

## 3. 마이크로컨트롤러의 통신 방식

마이크로컨트롤러는 다양한 통신 프로토콜(Protocol)을 사용하여 다른 장치나 모듈(Module)과 데이터를 주고받습니다.

### 3.1. UART (Universal Asynchronous Receiver/Transmitter)

**UART (범용 비동기 송수신기)**는 가장 기본적인 시리얼(Serial) 통신 방식 중 하나입니다. 두 개의 라인(RX, TX)으로 통신하며, 클록(Clock) 신호 없이 데이터(Data)를 비동기적으로 전송합니다. 주로 PC와의 시리얼 통신, GPS 모듈, 블루투스(Bluetooth) 모듈 등과의 통신에 사용됩니다.

### 3.2. I2C (Inter-Integrated Circuit)

**I2C (아이 스퀘어드 씨 또는 아이 투 씨)**는 단일 마스터(Master)와 여러 슬레이브(Slave) 간의 통신을 위해 설계된 동기식 시리얼 통신 프로토콜입니다. 단 두 개의 라인(SDA: Serial Data Line, SCL: Serial Clock Line)으로 여러 장치와 통신할 수 있어 회로 구성이 간단합니다. 주로 센서(예: 가속도 센서, 자이로스코프), EEPROM 등과의 통신에 사용됩니다.

### 3.3. SPI (Serial Peripheral Interface)

**SPI (시리얼 주변장치 인터페이스)**는 고속 전이중(Full-duplex) 동기식 시리얼 통신 프로토콜입니다. 마스터(Master)와 슬레이브(Slave) 간의 통신에 사용되며, 여러 개의 라인(MOSI: Master Out Slave In, MISO: Master In Slave Out, SCLK: Serial Clock, SS/CS: Slave Select/Chip Select)을 사용합니다. 주로 SD 카드(Card) 모듈, LCD, 카메라(Camera) 모듈 등 고속 데이터 전송이 필요한 장치에 사용됩니다.

## 4. 실시간 제어와 타이머(Timer)

로봇 제어에서 **실시간 제어 (Real-time Control)**는 매우 중요합니다. 이는 특정 시간 제약 내에 동작을 수행해야 함을 의미하며, 타이밍(Timing)이 어긋나면 로봇의 오작동이나 안전 문제로 이어질 수 있습니다. 마이크로컨트롤러는 이러한 실시간 제어를 위해 **타이머(Timer)** 기능을 제공합니다.

### 4.1. 타이머(Timer)의 사용 절차

타이머는 마이크로컨트롤러 내부의 하드웨어(Hardware) 모듈로, 주기적인 이벤트(Event) 발생, 정확한 시간 측정, 특정 시간 지연 생성 등에 사용됩니다.

일반적인 타이머 사용 절차는 다음과 같습니다.

1.  **타이머 활성화 (Enable Timer):** 사용할 타이머 모듈을 활성화합니다.
2.  **프리스케일러(Prescaler) 설정:** 내부 클록(Clock) 주파수를 분주하여 타이머의 카운트(Count) 속도를 조절합니다.
3.  **오버플로우(Overflow) 값 또는 비교 값 설정:** 타이머가 카운트(Count)할 최대 값(오버플로우 값)이나 특정 값(비교 값)에 도달했을 때 이벤트를 발생시키도록 설정합니다.
4.  **인터럽트(Interrupt) 설정 (선택 사항):** 타이머가 특정 값에 도달하면 인터럽트(Interrupt)를 발생시켜 특정 루틴(Routine)을 자동으로 실행하도록 설정할 수 있습니다.
5.  **타이머 시작 (Start Timer):** 타이머 카운트를 시작합니다.
6.  **인터럽트(Interrupt) 서비스 루틴(Routine) 작성 (인터럽트 사용 시):** 타이머 인터럽트가 발생했을 때 실행될 코드를 작성합니다.

## 5. 아두이노(Arduino)

**아두이노(Arduino)**는 마이크로컨트롤러를 기반으로 한 오픈 소스(Open Source) 하드웨어(Hardware) 및 소프트웨어(Software) 플랫폼(Platform)입니다. 비전문가도 쉽게 임베디드(Embedded) 시스템을 개발할 수 있도록 설계되어, 로봇 제어를 포함한 다양한 프로젝트에 널리 사용됩니다.

### 5.1. 마이크로보드(Microboard)의 개념

**마이크로보드(Microboard)**는 마이크로컨트롤러 칩을 중심으로 필요한 최소한의 회로(전원 공급, 클록, 리셋 회로 등)를 구성하여 하나의 기판 형태로 만든 것입니다. 아두이노 보드(Board)도 이러한 마이크로보드의 한 종류입니다.

### 5.2. 아두이노(Arduino)의 개념

아두이노는 특정 마이크로컨트롤러(주로 Atmel사의 AVR 계열)를 탑재한 마이크로보드와, 이를 쉽게 프로그래밍(Programming)할 수 있는 통합 개발 환경(IDE: Integrated Development Environment) 및 라이브러리(Library)를 포함하는 전체 생태계(Ecosystem)를 의미합니다.

### 5.3. 아두이노(Arduino)의 인터페이스(Interface) 및 통신 방식

아두이노 보드는 위에 설명된 대부분의 마이크로컨트롤러 인터페이스와 통신 방식을 지원합니다.

* **디지털 핀 (Digital Pin):** 디지털 입력 및 출력에 사용됩니다.
* **아날로그 핀 (Analog Pin):** 아날로그 입력(ADC)에 사용됩니다.
* **PWM 핀:** 모터 속도 제어, LED 밝기 조절 등에 사용되는 PWM 신호를 출력합니다.
* **UART (Serial 통신):** USB-to-Serial 컨버터(Converter)를 통해 PC와 통신하거나, 다른 시리얼 장치와 통신할 수 있습니다.
* **I2C (Wire 라이브러리):** `Wire` 라이브러리를 사용하여 I2C 통신을 쉽게 구현할 수 있습니다.
* **SPI (SPI 라이브러리):** `SPI` 라이브러리를 사용하여 SPI 통신을 쉽게 구현할 수 있습니다.

아두이노는 이러한 인터페이스와 통신 방식을 추상화(Abstraction)하여, 사용자가 복잡한 레지스터(Register) 설정을 직접 할 필요 없이 간단한 함수(Function) 호출로 하드웨어(Hardware)를 제어할 수 있도록 돕습니다.

---